/* =================================================================== */
/*           HOJA DE ESTILOS PROFESIONAL PARA MÁSTIL INTERACTIVO         */
/* =================================================================== */


/* =================================================================== */
/* 1. IMPORTACIÓN DE FUENTES Y VARIABLES GLOBALES (SISTEMA DE DISEÑO)  */
/* =================================================================== */
/* Almacenar colores y fuentes en variables nos permite un control
   total sobre el tema del sitio desde un único lugar. Es una práctica
   de desarrollo frontend de alto nivel. */

:root {
  /* Paleta de Colores */
  --color-background-deep: #121417;
  --color-background: #1c1f24;
  --color-surface: #2a2e34;
  --color-primary: #00aeff;
  --color-primary-light: #6ee2ff;
  --color-text-primary: #f0f0f0;
  --color-text-secondary: #a8b2c1;
  --color-border: #3c424d;

  /* Paleta del Mástil */
  --color-fretboard-wood: #5a3e2b;
  --color-fret-wire: #9aabaf;
  --color-fret-inlay: #d1c8b8;
  --color-string: #d0d0d0;
  --color-nut: #e0ddd5;

  /* Paleta de Notas */
  --color-note-root-bg: #ffc107; /* Un amarillo dorado para la tónica */
  --color-note-root-text: #111;
  --color-note-other-bg: #00aeff; /* El azul primario para las demás notas */
  --color-note-other-text: #fff;

  /* Tipografía */
  --font-main: 'Poppins', sans-serif;
}


/* =================================================================== */
/* 2. RESETEO GLOBAL Y ESTILOS BASE DEL BODY                           */
/* =================================================================== */
*, *::before, *::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: var(--font-main);
  background-color: var(--color-background-deep);
  color: var(--color-text-primary);
  display: grid;
  place-items: center;
  min-height: 100vh;
  padding: 2rem;
}


/* =================================================================== */
/* 3. LAYOUT PRINCIPAL Y CONTROLES                                     */
/* =================================================================== */
.master-container {
  width: 100%;
  max-width: 1400px;
  background-color: var(--color-background);
  border: 1px solid var(--color-border);
  border-radius: 16px;
  padding: 2rem;
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
}

.control-header {
  text-align: center;
  margin-bottom: 2rem;
}

.control-header h1 {
  font-weight: 600;
  font-size: 2.25rem;
  color: var(--color-text-primary);
}

.control-header h2 {
  font-weight: 300;
  font-size: 1.5rem;
  color: var(--color-primary);
  margin-top: 0.25rem;
  margin-bottom: 2rem;
  min-height: 2.25rem; /* Evita que el layout salte al cambiar el texto */
}

.controls-wrapper {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 1.5rem 2rem;
}

.control-group label {
  display: block;
  font-size: 0.9rem;
  font-weight: 400;
  color: var(--color-text-secondary);
  margin-bottom: 0.5rem;
  text-align: left;
}

.control-group select {
  appearance: none; /* Quita el estilo por defecto del navegador */
  background-color: var(--color-surface);
  color: var(--color-text-primary);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  padding: 0.8rem 1.2rem;
  font-family: inherit;
  font-size: 1rem;
  min-width: 200px;
  cursor: pointer;
  transition: all 0.2s ease-in-out;
  
  /* Flecha personalizada usando un SVG en línea */
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23a8b2c1' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 1rem center;
}

.control-group select:hover {
  border-color: var(--color-primary);
  background-color: #31363f;
}

.control-group select:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px rgba(0, 174, 255, 0.2);
}


/* =================================================================== */
/* 4. ÁREA DEL MÁSTIL Y SU ESTRUCTURA GRID                             */
/* =================================================================== */
.fretboard-area {
  margin-top: 2rem;
  overflow-x: auto; /* La clave para la responsividad del mástil */
  
  /* Estilo sutil para la barra de scroll */
  scrollbar-width: thin;
  scrollbar-color: var(--color-border) var(--color-background);
}
.fretboard-area::-webkit-scrollbar { height: 8px; }
.fretboard-area::-webkit-scrollbar-track { background: var(--color-background); }
.frotboard-area::-webkit-scrollbar-thumb { background-color: var(--color-border); border-radius: 4px; }

/* Contenedor principal de la grid del mástil */
#fretboard {
  display: grid;
  /* Definimos las filas (6 cuerdas) y columnas (cejuela + trastes) */
  grid-template-rows: repeat(6, 45px); /* 6 cuerdas de 45px de alto */
  /* 1 columna para las cuerdas al aire + 24 trastes */
  grid-template-columns: 60px repeat(24, minmax(70px, 1fr)); 
  background-color: var(--color-fretboard-wood);
  /* Un gradiente sutil para darle textura de madera */
  background-image: linear-gradient(rgba(0,0,0,0.1) 1px, transparent 1px);
  background-size: 100% 45px; /* Alinea el gradiente con las cuerdas */
  min-width: 2000px; /* Evita que los trastes se colapsen */
  border-radius: 8px;
  position: relative; /* Para posicionar las cuerdas visuales */
}


/* =================================================================== */
/* 5. DETALLES VISUALES DEL MÁSTIL (TRASTES, CUERDAS, INLAYS)         */
/* =================================================================== */
/* Celda genérica de la grid (tanto cejuela como trastes) */
.fret-cell {
  position: relative; /* Contexto para posicionar las notas */
  display: grid;
  place-items: center;
  border-right: 2px solid var(--color-fret-wire); /* El alambre del traste */
  border-top: 1px solid var(--color-string); /* La cuerda de la guitarra */
}

/* Última fila no necesita cuerda superior */
.fret-cell[data-string="5"] {
  border-bottom: 1px solid var(--color-string);
}

/* Cejuela (columna 0) */
.fret-cell:first-child {
  border-right-width: 8px; /* Cejuela más gruesa */
  border-right-color: var(--color-nut);
}

/* Inlays (puntos guía) */
.fret-inlay {
  position: absolute;
  background-color: var(--color-fret-inlay);
  opacity: 0.6;
  border-radius: 50%;
  width: 12px;
  height: 12px;
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.3);
}

/* Celda para las notas de las cuerdas al aire (fuera de la grid de trastes) */
.open-string-label {
  display: grid;
  place-items: center;
  font-weight: 600;
  font-size: 1.2rem;
  color: var(--color-text-secondary);
}


/* =================================================================== */
/* 6. MARCADORES DE NOTAS                                              */
/* =================================================================== */
.note-marker {
  width: 34px;
  height: 34px;
  border-radius: 50%;
  display: grid;
  place-items: center;
  font-weight: 600;
  font-size: 1.1rem;
  color: var(--color-note-other-text);
  background-color: var(--color-note-other-bg);
  box-shadow: 0 4px 10px rgba(0,0,0,0.4);
  /* Animación sutil al aparecer */
  transform: scale(0.8);
  opacity: 0;
  animation: pop-in 0.3s forwards cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* Estilo específico para la nota tónica (Root Note) */
.note-marker.root {
  background-color: var(--color-note-root-bg);
  color: var(--color-note-root-text);
  transform: scale(1.1); /* La hacemos un poco más grande */
}

@keyframes pop-in {
  to {
    transform: scale(1);
    opacity: 1;
  }
}

/* =================================================================== */
/* 7. MEDIA QUERIES PARA RESPONSIVIDAD                                 */
/* =================================================================== */
@media (max-width: 768px) {
  body {
    padding: 1rem 0;
  }
  .master-container {
    padding: 1.5rem 1rem;
    border-radius: 0;
    min-height: 100vh;
  }
  .controls-wrapper {
    flex-direction: column;
    align-items: stretch;
  }
  .control-group select {
    min-width: 100%;
  }
}
